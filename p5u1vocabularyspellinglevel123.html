<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>P5U1 Vocabulary-Spelling Level 123</title>

<style>
/* Projector-friendly BIG screen + still mobile responsive */

:root{
  --ink:#0b1220;
  --muted:#5b6474;
  --line:#e7e9f3;
  --shadow:0 16px 46px rgba(12,20,40,.10);
  --shadow2:0 12px 30px rgba(12,20,40,.10);
  --good:#1f9d55;
  --bad:#d64545;
  --grad:linear-gradient(135deg,#7b6cff,#3a86ff);

  /* Responsive sizing */
  --wrapW: min(1280px, calc(100% - 40px));
  --radius: clamp(14px, 1.1vw, 22px);
  --pad: clamp(14px, 1.3vw, 22px);
  --gap: clamp(10px, 1.2vw, 16px);

  --h1: clamp(18px, 1.6vw, 26px);
  --h2: clamp(18px, 1.7vw, 28px);

  --text: clamp(14px, 1.25vw, 20px);
  --small: clamp(12px, 1.05vw, 16px);

  --btn: clamp(14px, 1.2vw, 18px);
  --btnPadY: clamp(10px, 1.0vw, 14px);
  --btnPadX: clamp(14px, 1.2vw, 20px);

  --input: clamp(16px, 1.35vw, 20px);
  --cardPad: clamp(14px, 1.4vw, 22px);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:var(--ink);

  /* âœ… White background */
  background:#ffffff;

  min-height:100vh;
  display:flex;
  flex-direction:column;
}

/* ===== Layout ===== */
.wrap{
  width:var(--wrapW);
  margin: clamp(14px, 1.4vw, 22px) auto clamp(12px, 1.2vw, 18px);
  flex:1 0 auto;
}

header{
  background:#ffffff;
  border:1px solid var(--line);
  border-radius: calc(var(--radius) + 4px);
  box-shadow:var(--shadow);
  padding: var(--pad);
}

.topRow{
  display:flex;
  justify-content:space-between;
  align-items:center;
  flex-wrap:wrap;
  gap: var(--gap);
}

h1{margin:0;font-size:var(--h1);font-weight:950;letter-spacing:.2px}

/* ===== Tabs ===== */
.tabs{display:flex;gap:8px;flex-wrap:wrap}

.tab{
  border:1px solid transparent;
  padding: calc(var(--btnPadY) - 2px) var(--btnPadX);
  border-radius:999px;
  font-weight:950;
  font-size:var(--btn);
  background:#eef1ff;
  cursor:pointer;
  user-select:none;
  box-shadow: 0 6px 16px rgba(12,20,40,.06);
}

.tab.active{
  background:var(--grad);
  color:#fff;
  box-shadow: 0 10px 22px rgba(58,134,255,.18);
}

.tab[disabled]{
  opacity:.40;
  cursor:not-allowed;
  box-shadow:none;
}

/* ===== Section header ===== */
.sectionHead{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin: clamp(14px, 1.4vw, 20px) 2px clamp(10px, 1.0vw, 14px);
  gap: var(--gap);
  flex-wrap:wrap;
}

#sectionTitle{
  margin:0;
  font-size:var(--h2);
  font-weight:950;
}

.scorePill{
  padding: calc(var(--btnPadY) - 4px) var(--btnPadX);
  border-radius:999px;
  border:1px solid var(--line);
  background:#fff;
  font-weight:950;
  font-size:var(--btn);
  white-space:nowrap;
  box-shadow: 0 10px 22px rgba(12,20,40,.06);
}

/* ===== Cards ===== */
.grid{display:grid;gap: var(--gap);}

.card{
  background:#fff;
  border:1px solid var(--line);
  border-radius: var(--radius);
  box-shadow:var(--shadow2);
  padding: var(--cardPad);
}

.qTop{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  margin-bottom: clamp(8px, 0.8vw, 12px);
}

.badge{
  font-size:var(--small);
  padding: 6px 10px;
  border-radius:999px;
  background:#eef1ff;
  font-weight:950;
}

.tag{
  font-size:var(--small);
  padding: 6px 10px;
  border-radius:999px;
  border:1px solid var(--line);
  min-height: 28px;
  display:inline-flex;
  align-items:center;
  font-weight:900;
}

.tag.good{background:#e6f7ef;color:var(--good);}
.tag.bad{background:#fdeaea;color:var(--bad);}

.promptTitle{
  font-weight:950;
  margin:0 0 clamp(8px, 0.7vw, 12px);
  font-size:var(--text);
}

.sentence{
  font-size:var(--text);
  color:var(--muted);
  line-height:1.45;
}
.sentence b{color:var(--ink);}

/* ===== Inputs / choices ===== */
.choices{
  display:grid;
  gap: clamp(8px, 0.8vw, 10px);
  margin-top: clamp(10px, 0.9vw, 14px);
}

.choice{
  display:flex;
  gap:12px;
  align-items:center;
  font-weight:950;
  font-size:var(--text);
}

.choice input[type="radio"]{
  width: 20px;
  height: 20px;
  accent-color: #4f7dff;
}

.spellParts{
  display:flex;
  gap:10px;
  align-items:center;
  margin-top: clamp(10px, 0.9vw, 14px);
  flex-wrap:wrap;
  font-size: var(--text);
  font-weight:950;
}

input[type="text"], select{
  border:1px solid var(--line);
  border-radius: 12px;
  padding: 12px 14px;
  font-weight:950;
  font-size: var(--input);
  min-height: 52px;
  outline:none;
  box-shadow: 0 10px 22px rgba(12,20,40,.05);
}

input[type="text"]:focus, select:focus{
  border-color: rgba(58,134,255,.55);
  box-shadow: 0 0 0 4px rgba(58,134,255,.15), 0 14px 30px rgba(12,20,40,.08);
}

/* ===== Buttons ===== */
.checkBtn{
  margin-top: clamp(10px, 1.0vw, 14px);
  border:0;
  border-radius: 14px;
  padding: 12px 16px;
  font-weight:950;
  font-size: var(--btn);
  color:#fff;
  background:var(--grad);
  cursor:pointer;
  min-height: 52px;
  box-shadow: 0 14px 28px rgba(58,134,255,.18);
}

.checkBtn:active{transform: translateY(1px);}

.actionWrap{
  margin-top: clamp(18px, 1.8vw, 28px);
  text-align:center;
}

.primaryBtn{
  border:0;
  border-radius:999px;
  padding: var(--btnPadY) calc(var(--btnPadX) + 6px);
  font-weight:950;
  font-size: var(--btn);
  background:var(--grad);
  color:#fff;
  cursor:pointer;
  min-height: 56px;
  box-shadow: 0 16px 32px rgba(58,134,255,.18);
}

.primaryBtn:active{transform: translateY(1px);}
.primaryBtn[disabled]{opacity:.5;cursor:not-allowed;box-shadow:none;}

.hint{
  margin-top:10px;
  font-size: var(--small);
  color:var(--muted);
}

/* ===== Congrats page ===== */
.congratsCard{
  background:#ffffff;
  border:1px solid var(--line);
  border-radius: calc(var(--radius) + 2px);
  box-shadow:var(--shadow);
  padding: clamp(16px, 1.6vw, 22px);
}

.congratsTitle{
  margin:0 0 10px;
  font-size: clamp(22px, 2.0vw, 34px);
  font-weight:980;
}

.congratsSub{
  margin:0 0 14px;
  color:var(--muted);
  font-size: var(--text);
  line-height:1.45;
}

.tableWrap{
  overflow:auto;
  border:1px solid var(--line);
  border-radius:14px;
  background:#fff;
}

table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  min-width: 780px;
  background:#fff;
}

th,td{
  padding: clamp(12px, 1.1vw, 16px);
  border-bottom:1px solid var(--line);
  vertical-align:top;
  font-size: var(--text);
  line-height:1.45;
}

th{
  text-align:left;
  background:#f6f7ff;
  font-weight:980;
  position: sticky;
  top: 0;
  z-index: 1;
}

tr:last-child td{border-bottom:0;}
.wordCell{font-weight:980;white-space:nowrap;}

.footer{
  margin-top:auto;
  text-align:center;
  padding:12px;
  font-size: var(--small);
  color:var(--muted);
}

/* ===== Mobile tweaks ===== */
@media (max-width: 560px){
  :root{ --wrapW: calc(100% - 20px); }
  .tab{ padding: 10px 12px; font-size: 14px; }
  .scorePill{ width:100%; text-align:center; }
  input[type="text"], select, .checkBtn, .primaryBtn{ width:100%; }
  table{min-width: 640px;}
}
</style>
</head>

<body>
<div class="wrap">

<!-- ===== GAME VIEW ===== -->
<section id="gameView">
  <header>
    <div class="topRow">
      <h1>P5U1 Vocabulary-Spelling Level 123</h1>
      <div class="tabs">
        <button class="tab" id="tabL1">Level 1</button>
        <button class="tab" id="tabL2">Level 2</button>
        <button class="tab" id="tabL3">Level 3</button>
      </div>
    </div>
  </header>

  <div class="sectionHead">
    <h2 id="sectionTitle">Level 1 â€” 15 Questions</h2>
    <div class="scorePill">Score: <span id="scoreNow">0</span>/15</div>
  </div>

  <main class="grid" id="qList"></main>

  <!-- Level 1/2 Next Level button (only shows when 15/15) -->
  <div class="actionWrap" id="nextLevelWrap" style="display:none;">
    <button class="primaryBtn" id="btnNextLevel">Next Level</button>
    <div class="hint" id="nextHint"></div>
  </div>

  <!-- Level 3 Finish button (only shows when 15/15) -->
  <div class="actionWrap" id="finishWrap" style="display:none;">
    <button class="primaryBtn" id="btnFinish">Finish</button>
    <div class="hint">ðŸŽ‰ Great job! Click Finish to see the spelling words & sentences.</div>
  </div>
</section>

<!-- ===== CONGRATS VIEW ===== -->
<section id="congratsView" style="display:none;">
  <div class="congratsCard">
    <h2 class="congratsTitle">Congratulations! ðŸŽ‰</h2>
    <p class="congratsSub">Here is the full list of spelling words and their sentences.</p>

    <div class="tableWrap">
      <table>
        <thead>
          <tr>
            <th style="width:240px;">Spelling Word</th>
            <th>Sentence</th>
          </tr>
        </thead>
        <tbody id="congratsTbody"></tbody>
      </table>
    </div>

    <div class="actionWrap">
      <button class="primaryBtn" id="btnPracticeAgain">Practice Again</button>
      <div class="hint">This will bring you back to Level 1.</div>
    </div>
  </div>
</section>

</div>

<footer class="footer">
Â© <span id="year"></span> Sng Qi Wen
</footer>

<script>
const WORDS=[
  "lunged","yelped","errands","shoved","tugging",
  "sprinted","smirked","dreaded","bellowed","yearning",
  "forlornly","flexibility","hesitantly","humiliating","satisfaction"
];

const SENTENCES=[
  "He lunged forward to catch the ball just before it hit the ground.",
  "Ali yelped in pain when he tripped over his friendâ€™s school bag and fell.",
  "I had to run some errands for my mom, like picking up groceries and fetching my little sister from the day care centre.",
  "He shoved the heavy door open with all his strength.",
  "She kept tugging on the rope to pull the kite down from the tree.",
  "The deer sprinted across the field, trying to escape the tiger.",
  "Thomas smirked when he realized he had solved the puzzle before anyone else.",
  "I dreaded going to the dentist because I do not like the sound of the dental drill.",
  "The football coach bellowed instructions from the sidelines during the game.",
  "Robin missed his family so much during the 5 days school camp that he was yearning to go back.",
  "Ahmadâ€™s mother sensed that something was amiss when he stared forlornly out the window after school.",
  "Having flexibility helped her do amazing tricks in her gymnastics routine.",
  "John hesitantly raised his hand to answer the difficult question.",
  "It was humiliating for Eva when she forgot her lines during her drama performance in front of the school.",
  "Ivy felt great satisfaction after finishing her school project on time."
];

function shuffle(arr){ return arr.sort(()=>Math.random()-0.5); }

/* ===== Sound Effects (Web Audio API) ===== */
let audioCtx=null;
function getAudioCtx(){
  if(!audioCtx) audioCtx=new (window.AudioContext||window.webkitAudioContext)();
  if(audioCtx.state==="suspended") audioCtx.resume().catch(()=>{});
  return audioCtx;
}
function playTone({freq=880,duration=0.12,type="sine",gain=0.18,detune=0,when=0}){
  const ctx=getAudioCtx();
  const t0=ctx.currentTime+when;
  const o=ctx.createOscillator();
  const g=ctx.createGain();
  o.type=type;
  o.frequency.setValueAtTime(freq,t0);
  o.detune.setValueAtTime(detune,t0);
  g.gain.setValueAtTime(0.0001,t0);
  g.gain.exponentialRampToValueAtTime(gain,t0+0.01);
  g.gain.exponentialRampToValueAtTime(0.0001,t0+duration);
  o.connect(g); g.connect(ctx.destination);
  o.start(t0); o.stop(t0+duration+0.02);
}
function playCorrectSound(){
  playTone({freq:1046.5,duration:0.10,type:"triangle",gain:0.14});
  playTone({freq:1568.0,duration:0.12,type:"triangle",gain:0.12,when:0.06});
}
function playWrongSound(){
  playTone({freq:220,duration:0.16,type:"sine",gain:0.16,detune:-10});
  playTone({freq:164.8,duration:0.22,type:"sine",gain:0.14,detune:10,when:0.10});
}
function playCelebrationSound(){
  playTone({freq:523.25, duration:0.22, type:"triangle", gain:0.10});        // C5
  playTone({freq:659.25, duration:0.22, type:"triangle", gain:0.09});        // E5
  playTone({freq:783.99, duration:0.26, type:"triangle", gain:0.08});        // G5
  playTone({freq:1046.5, duration:0.10, type:"sine", gain:0.09, when:0.14}); // C6
  playTone({freq:1318.5, duration:0.10, type:"sine", gain:0.08, when:0.22}); // E6
  playTone({freq:1568.0, duration:0.12, type:"sine", gain:0.07, when:0.30}); // G6
}

/* âœ… Sound when clicking Practice Again */
function playPracticeAgainSound(){
  // light "whoosh-pop" reset feel
  playTone({freq:392.0, duration:0.08, type:"sine", gain:0.10});              // G4
  playTone({freq:523.25, duration:0.10, type:"triangle", gain:0.11, when:0.06}); // C5
  playTone({freq:659.25, duration:0.10, type:"triangle", gain:0.09, when:0.12}); // E5
}

/* ===== Levels ===== */
const LEVELS=["L1","L2","L3"];
let levelIndex=0; // only current level tab enabled
let score={L1:0,L2:0,L3:0};

const MP_PARTS = {
  lunged:{prefix:"lun",correct:"g",suffix:"ed",options:["g","gg","dge","j"]},
  yelped:{prefix:"yel",correct:"p",suffix:"ed",options:["p","pp","b","pe"]},
  errands:{prefix:"er",correct:"r",suffix:"ands",options:["r","rr","ra","re"]},
  shoved:{prefix:"sho",correct:"v",suffix:"ed",options:["v","ve","f","ff"]},
  tugging:{prefix:"tu",correct:"gg",suffix:"ing",options:["g","gg","gue","j"]},
  sprinted:{prefix:"spr",correct:"in",suffix:"ted",options:["in","en","im","inn"]},
  smirked:{prefix:"smir",correct:"k",suffix:"ed",options:["k","ck","c","kk"]},
  dreaded:{prefix:"dre",correct:"ad",suffix:"ed",options:["ad","ed","aid","add"]},
  bellowed:{prefix:"bell",correct:"ow",suffix:"ed",options:["ow","o","oa","ou"]},
  yearning:{prefix:"year",correct:"n",suffix:"ing",options:["n","nn","m","ng"]},
  forlornly:{prefix:"for",correct:"lor",suffix:"nly",options:["lor","lorn","lern","lornn"]},
  flexibility:{prefix:"flex",correct:"ibil",suffix:"ity",options:["ibil","able","abil","ibilit"]},
  hesitantly:{prefix:"hesit",correct:"ant",suffix:"ly",options:["ant","ent","and","annt"]},
  humiliating:{prefix:"humil",correct:"iat",suffix:"ing",options:["iat","ate","ait","eiat"]},
  satisfaction:{prefix:"satis",correct:"fact",suffix:"ion",options:["fact","fect","fat","fakt"]}
};

function currentLevel(){ return LEVELS[levelIndex]; }
function levelLabel(lv){ return lv==="L1"?"Level 1":lv==="L2"?"Level 2":"Level 3"; }
function promptText(lv){
  return lv==="L1" ? "Choose the correct spelling:" :
         lv==="L2" ? "Complete the spelling:" :
                     "Fill in the blank. Type the correct spelling:";
}
function blank(i){ return SENTENCES[i].replace(new RegExp(WORDS[i],"i"),"____"); }

function applyTabStates(){
  const lv=currentLevel();
  const tabs=[
    {id:"tabL1",lv:"L1",idx:0},
    {id:"tabL2",lv:"L2",idx:1},
    {id:"tabL3",lv:"L3",idx:2},
  ];
  tabs.forEach(t=>{
    const el=document.getElementById(t.id);
    el.disabled = (t.idx !== levelIndex);   // ONLY current enabled
    el.classList.toggle("active", t.lv===lv);
  });
}

function updateActionButtons(){
  const lv=currentLevel();
  const perfect = score[lv]===15;
  const isLast = levelIndex===LEVELS.length-1;

  const nextWrap=document.getElementById("nextLevelWrap");
  const nextHint=document.getElementById("nextHint");
  if(!isLast){
    nextWrap.style.display = perfect ? "block" : "none";
    const nextLv=LEVELS[levelIndex+1];
    nextHint.textContent = perfect ? `${levelLabel(nextLv)} is ready â€” click â€œNext Levelâ€ to continue.` : "";
  }else{
    nextWrap.style.display="none";
  }

  const finishWrap=document.getElementById("finishWrap");
  finishWrap.style.display = (isLast && perfect) ? "block" : "none";
}

function render(){
  const lv=currentLevel();
  document.getElementById("sectionTitle").textContent = levelLabel(lv)+" â€” 15 Questions";
  document.getElementById("scoreNow").textContent = score[lv];

  applyTabStates();

  const list=document.getElementById("qList");
  list.innerHTML="";

  WORDS.forEach((w,i)=>{
    const card=document.createElement("div");
    card.className="card";

    const top=document.createElement("div");
    top.className="qTop";
    top.innerHTML=`<span class="badge">Q${i+1}/15</span><span class="tag" id="tag-${i}"></span>`;
    card.appendChild(top);

    const title=document.createElement("div");
    title.className="promptTitle";
    title.textContent = promptText(lv);
    card.appendChild(title);

    const sentence=document.createElement("div");
    sentence.className="sentence";
    sentence.innerHTML="<b>Sentence:</b> "+blank(i);
    card.appendChild(sentence);

    if(lv==="L1"){
      const choices=document.createElement("div");
      choices.className="choices";
      const options=shuffle([w,...shuffle(WORDS.filter(x=>x!==w)).slice(0,3)]);
      options.forEach(opt=>{
        const label=document.createElement("label");
        label.className="choice";
        label.innerHTML=`<input type="radio" name="q${i}" value="${opt}">${opt}`;
        choices.appendChild(label);
      });
      card.appendChild(choices);
    }

    if(lv==="L2"){
      const parts=MP_PARTS[w];
      const row=document.createElement("div");
      row.className="spellParts";

      const sel=document.createElement("select");
      const opts=shuffle([...parts.options]);
      sel.innerHTML=`<option value="">Selectâ€¦</option>`+
        opts.map(o=>`<option value="${o}">${o}</option>`).join("");

      row.innerHTML=`<span>${parts.prefix}</span>`;
      row.appendChild(sel);
      row.innerHTML+=`<span>${parts.suffix}</span>`;
      card.appendChild(row);
    }

    if(lv==="L3"){
      const row=document.createElement("div");
      row.style.marginTop="12px";
      row.innerHTML=`<input type="text" id="input-${i}" />`;
      card.appendChild(row);
    }

    const check=document.createElement("button");
    check.className="checkBtn";
    check.textContent="Check";
    check.onclick=()=>checkAnswer(i);
    card.appendChild(check);

    list.appendChild(card);
  });

  updateActionButtons();
}

function calcScore(){
  const lv=currentLevel();
  return WORDS.reduce((a,word,index)=>{
    let u="";
    if(lv==="L1"){
      const r=document.querySelector(`input[name="q${index}"]:checked`);
      u=r?r.value:"";
    }
    if(lv==="L2"){
      const sel=document.querySelectorAll("select")[index];
      u=sel?(MP_PARTS[word].prefix+sel.value+MP_PARTS[word].suffix):"";
    }
    if(lv==="L3"){
      const inp=document.getElementById("input-"+index);
      u=inp?inp.value:"";
    }
    return a+(u.toLowerCase()===word.toLowerCase()?1:0);
  },0);
}

function checkAnswer(i){
  const lv=currentLevel();
  const w=WORDS[i];
  let user="";

  if(lv==="L1"){
    const r=document.querySelector(`input[name="q${i}"]:checked`);
    user=r?r.value:"";
  }
  if(lv==="L2"){
    const sel=document.querySelectorAll("select")[i];
    user=sel?sel.value:"";
    user=(MP_PARTS[w].prefix+user+MP_PARTS[w].suffix);
  }
  if(lv==="L3"){
    user=document.getElementById("input-"+i).value;
  }

  const correct=user.toLowerCase()===w.toLowerCase();
  const tag=document.getElementById("tag-"+i);
  tag.className="tag "+(correct?"good":"bad");
  tag.textContent=correct?"Correct":"Try again";

  if(correct) playCorrectSound();
  else playWrongSound();

  score[lv]=calcScore();
  document.getElementById("scoreNow").textContent=score[lv];

  updateActionButtons();
}

/* Tabs are always disabled except current (so click does nothing) */
document.getElementById("tabL1").onclick=()=>{};
document.getElementById("tabL2").onclick=()=>{};
document.getElementById("tabL3").onclick=()=>{};

/* Next Level: only if perfect */
document.getElementById("btnNextLevel").onclick=()=>{
  const lv=currentLevel();
  if(score[lv]!==15) return;
  if(levelIndex>=LEVELS.length-1) return;
  levelIndex++;
  render();
  window.scrollTo({top:0,behavior:"smooth"});
};

/* ===== Congrats page ===== */
function buildCongratsTable(){
  const tbody=document.getElementById("congratsTbody");
  tbody.innerHTML="";
  WORDS.forEach((w,i)=>{
    const tr=document.createElement("tr");
    tr.innerHTML = `<td class="wordCell">${w}</td><td>${SENTENCES[i]}</td>`;
    tbody.appendChild(tr);
  });
}

function showCongrats(){
  buildCongratsTable();
  document.getElementById("gameView").style.display="none";
  document.getElementById("congratsView").style.display="block";
  window.scrollTo({top:0,behavior:"smooth"});
  playCelebrationSound();
}

function showGame(){
  document.getElementById("congratsView").style.display="none";
  document.getElementById("gameView").style.display="block";
  window.scrollTo({top:0,behavior:"smooth"});
}

/* Finish: only if Level 3 perfect */
document.getElementById("btnFinish").onclick=()=>{
  const lv=currentLevel();
  const isLast = levelIndex===LEVELS.length-1;
  if(!isLast) return;
  if(score[lv]!==15) return;
  showCongrats();
};

/* Practice Again: play sound, reset everything, go back to Level 1 */
document.getElementById("btnPracticeAgain").onclick=()=>{
  playPracticeAgainSound();
  score={L1:0,L2:0,L3:0};
  levelIndex=0;

  // small delay so sound starts before swapping view (helps some browsers)
  setTimeout(()=>{
    showGame();
    render();
  }, 80);
};

document.getElementById("year").textContent=new Date().getFullYear();
render();
</script>
</body>
</html>