<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>P5U1 Vocabulary-Spelling</title>

<script>
document.addEventListener('contextmenu', function(e) {
  e.preventDefault();
});
</script>

<style>
/* (Your CSS remains unchanged ‚Äî shortened here for clarity) */
:root{
  --ink:#0b1220;
  --muted:#4b5563;
  --line:#d1d5db;
  --accent:#1d4ed8;
  --next:#0284c7;
  --good:#16a34a;
  --bad:#dc2626;
  --radius:22px;
  --sans: ui-sans-serif, system-ui;
  --panelW: min(1200px, 96vw);
  --btnH: 74px;
  --btnPadX: 28px;
  --controlsPad: 160px;
  --titleSize: 34px;
  --metaSize: 20px;
  --wordSize: 92px;
  --inputSize: 28px;
  --pad: 26px;
}
*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family:var(--sans);
  background:#ffffff;
  color:var(--ink);
  display:flex;
  justify-content:center;
  padding:18px;
}
/* (Rest of your CSS stays exactly the same) */
</style>
</head>

<body>
<section class="panel">
<header>
<h1>P5U1 Vocabulary-Spelling</h1>
</header>

<!-- GAME PAGE -->
<div class="main" id="gamePage">
<div class="topRow">
<div id="progress">Word 1 of 15</div>
<div id="score">0/15 correct</div>
</div>

<div class="wordBox">
<div class="word covered" id="targetWord"></div>
</div>

<div class="writeRow">
<input id="inputBox" class="hidden" placeholder="Type..." autocomplete="off" spellcheck="false"/>
<span id="resultTag" class="hidden"></span>
</div>

<div class="controls" id="controls">
<div class="btnRow">
<button id="btnLook">Look</button>
<button id="btnSay" disabled>Say</button>
<button id="btnCover" disabled>Cover</button>
<button id="btnWrite" disabled>Write</button>
<button id="btnCheck" class="primary" disabled>Check</button>
<button id="btnNext" class="next">Next Word</button>
<button id="btnReset" class="danger">Reset Word</button>
</div>
<div class="controlsFooter">¬© <span id="year"></span> Sng Qi Wen</div>
</div>
</div>

<!-- CONGRATS PAGE -->
<div class="congratsWrap hidden" id="congratsPage">
<div class="congratsTitle">üéâ Congratulations! üéâ</div>
<div>You got <span id="finalScore">15/15</span> correct!</div>
<div class="wordsGrid" id="wordsGrid"></div>
<div class="playAgainRow">
<button id="btnPlayAgain" class="primary">Play Again</button>
</div>
</div>

</section>

<script>
const words=["lunged","yelped","errands","shoved","tugging","sprinted","smirked","dreaded","bellowed","yearning","forlornly","flexibility","hesitantly","humiliating","satisfaction"];

let idx=0,stage=0;
const stats=new Map();
function initStats(){stats.clear();words.forEach(w=>stats.set(w,{correct:false}));}
initStats();

document.getElementById("year").textContent=new Date().getFullYear();

let audioCtx=null;

function tone(f,d){
if(!audioCtx) audioCtx=new(window.AudioContext||window.webkitAudioContext)();
const o=audioCtx.createOscillator();
const g=audioCtx.createGain();
o.frequency.value=f;
g.gain.value=0.06;
o.connect(g); g.connect(audioCtx.destination);
o.start(); setTimeout(()=>o.stop(),d);
}

function soundCorrect(){tone(880,100);setTimeout(()=>tone(1175,120),120);}
function soundWrong(){tone(220,250);}

/* üëè HAND CLAPPING CHEER EFFECT */
function playCelebration(){
if(!audioCtx) audioCtx=new(window.AudioContext||window.webkitAudioContext)();

function clap(time){
const bufferSize = audioCtx.sampleRate * 0.15;
const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
const data = buffer.getChannelData(0);

for (let i = 0; i < bufferSize; i++) {
  data[i] = (Math.random() * 2 - 1) * Math.exp(-i / 2000);
}

const noise = audioCtx.createBufferSource();
noise.buffer = buffer;

const gain = audioCtx.createGain();
gain.gain.setValueAtTime(0.8, time);
gain.gain.exponentialRampToValueAtTime(0.01, time + 0.15);

noise.connect(gain);
gain.connect(audioCtx.destination);

noise.start(time);
}

// Series of claps üëèüëèüëèüëèüëè
let start = audioCtx.currentTime;
for(let i=0;i<8;i++){
  clap(start + i*0.22);
}
}

function speak(word){
if("speechSynthesis" in window){
speechSynthesis.cancel();
speechSynthesis.speak(new SpeechSynthesisUtterance(word));
}
}

function update(){
document.getElementById("targetWord").textContent=words[idx];
document.getElementById("progress").textContent=`Word ${idx+1} of ${words.length}`;
document.getElementById("score").textContent=`${[...stats.values()].filter(v=>v.correct).length}/${words.length} correct`;
}

function resetStages(){
stage=0;
btnLook.disabled=false;
btnSay.disabled=true;
btnCover.disabled=true;
btnWrite.disabled=true;
btnCheck.disabled=true;
inputBox.classList.add("hidden");
inputBox.value="";
resultTag.className="hidden";
targetWord.classList.add("covered");
}

btnCheck.onclick=()=>{
const typed=inputBox.value.trim().toLowerCase();
if(!typed)return;

if(typed===words[idx]){
stats.get(words[idx]).correct=true;
soundCorrect();
if([...stats.values()].every(v=>v.correct)) showCongrats();
}else{
soundWrong();
}
update();
};

function showCongrats(){
document.getElementById("gamePage").classList.add("hidden");
document.getElementById("congratsPage").classList.remove("hidden");

const grid=document.getElementById("wordsGrid");
grid.innerHTML="";
words.forEach(w=>{
const d=document.createElement("div");
d.className="wordCell";
d.textContent=w;
grid.appendChild(d);
});

playCelebration(); // üëè Clapping cheer here
}

document.getElementById("btnPlayAgain").onclick=()=>{
idx=0;stage=0;initStats();
document.getElementById("congratsPage").classList.add("hidden");
document.getElementById("gamePage").classList.remove("hidden");
update();resetStages();
};

update();
</script>
</body>
</html>
